# Vulnerability Analyzer Docker Guide

This guide explains how to build and run the Vulnerability Analyzer using Docker.

## Prerequisites

- Docker installed on your system
- Git (to clone the repository if needed)

## Quick Start

1. Clone the repository (if you haven't already):
   ```bash
   git clone [repository-url]
   cd [repository-directory]
   ```

2. Build and run the Docker container:
   ```bash
   # On Linux/Mac
   chmod +x build_and_run.sh
   ./build_and_run.sh
   
   # Alternatively, you can run these commands manually:
   docker build -t vulnerability-analyzer .
   docker run -p 3000:3000 vulnerability-analyzer
   ```

3. Access the API:
   - The API will be available at: http://localhost:3000
   - You can test the `/vulns_details` endpoint using a POST request with the following format:
     ```json
     {
       "vulnerabilities": [
         "juiceshop-admin-priv-escalation",
         "juiceshop-ftp-exposure",
         "juice-shop-sensitive-legal-file",
         "juice-shop-sqli-login-bypass"
       ]
     }
     ```

## API Endpoints

- `POST /vulns_details`: Get detailed information about vulnerabilities
  - Body: `{"vulnerabilities": ["vulnerability-name-1", "vulnerability-name-2", ...]}`
  - Returns: JSON with vulnerability descriptions, remediations, severity levels, and related search results

## Environment Variables

The Docker image includes the necessary environment variables from the `.env` file. These include:
- API_KEY: For the language model API
- MODEL: The model to use for vulnerability analysis
- BASE_URL: The base URL for the API
- GOOGLE_API_KEY and GOOGLE_CSE_ID: For Google search functionality

## Troubleshooting

- If you encounter any issues with the container, you can check the logs:
  ```bash
  docker logs [container-id]
  ```

- To debug inside the container:
  ```bash
  docker exec -it [container-id] /bin/bash
  ```

- To check if the API is running properly:
  ```bash
  curl http://localhost:3000
  ``` 